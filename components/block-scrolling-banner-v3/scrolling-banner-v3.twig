{% set blockClassName = "scrolling-banner-v3" %}
{% set classNameEntryPoint = include('entry-points/entry-point-classes.twig', { fields: fields, block: block }, with_context = false) %}
{% set dataAttributeEntryPoint = include('entry-points/entry-point-data-attribute.twig', { fields: fields, block: block }, with_context = false) %}
{% set styleEntryPoint = include('entry-points/entry-point-style-v3.twig', { fields: fields, block: block, is_preview }, with_context = false) %}
{% set previewEntryPoint = include('entry-points/entry-point-preview-info.twig', { fields, block, displaytype, is_preview }, with_context = false) %}

{% set sectionStyles =  styleEntryPoint %}

{{previewEntryPoint}}
<style>
	.{{blockClassName}}.{{block.id}}{
		{{sectionStyles}}
	}
</style>
<section {{block.anchor ? "id=" ~ block.anchor : ''}} class="{{blockClassName}} {{classNameEntryPoint}} {{block.id}} lazy-fade" {{dataAttributeEntryPoint}} data-blockid="{{block.id}}" data-assetkey="{{blockClassName}}">

	{% set bannerSpeed = fields.scrolling_banner_speed %}
	{% set separatorAsImage = fields.separator_as_image %}
	{% set separatorImage = get_image(fields.separator_image) %}
	{% set separatorImageWidth = '--separator-image-width: ' ~ fields.separator_image_width ~ 'em;' %}
	{% set positioning = '--position:' ~ fields.positioning|ru ~ ';' %}
	{% set textSizeDesktop = '--text-size-desktop:' ~ fields.font_size_desktop ~ ';' %}
	{% set textSizePortrait = '--text-size-portrait:' ~ fields.font_size_portrait ~ ';' %}
	{% set textSizeMobile = '--text-size-mobile:' ~ fields.font_size_mobile ~ ';' %}
	{% set textColour = '--banner-text-colour:' ~ fields.text_colour ~ ';' %}
	{% set bannerTextStyles =  textSizeDesktop ~ textSizePortrait ~ textSizeMobile ~ positioning ~ textColour ~ separatorImageWidth %}


	{% if fields.enable_text_shadow %}
		{% set textShadowClassName = blockClassName ~ "--text-shadow" %}
		{% set textShadowStyle = "--text-shadow-offset-x:" ~ (fields.text_shadow_horizontal_offset|default(0)) ~ "; --text-shadow-offset-y: " ~ (fields.text_shadow_vertical_offset|default(0)) ~ "; --text-shadow-blur: " ~ (fields.text_shadow_blur|default(0)) ~ "; --text-shadow-colour: " ~ (fields.text_shadow_colour|default("#000000")) ~ ";" %}
	{% endif %}

	{% if fields.enable_scrolling_banner %}
		<style>
			.{{blockClassName}}__banner-container.{{block.id}}{
				{{bannerTextStyles}}
				{{textShadowStyle}}
			}
		</style>
		<div class="{{blockClassName}}__banner-container {{block.id}}" data-speed="{{bannerSpeed}}">
			<div class="{{blockClassName}}__wrapper">
				<div class="{{blockClassName}}__container">
					<div class="{{blockClassName}}__inner">
						{% for item in fields.scrolling_banner_texts %}
							{% if item.single_separator_image != null %}
								{% set singleSeparatorImage = get_image(item.single_separator_image) %}
								{% set singleSeparatorImageWidth = '--separator-image-width: ' ~ item.single_separator_image_width ~ 'em;' %}
								<style>
									.{{blockClassName}}__separator--image-single-{{loop.index}}{
										{{singleSeparatorImageWidth}}
									}
								</style>
								<img class="{{blockClassName}}__separator {{blockClassName}}__separator--image {{blockClassName}}__separator--image-single-{{loop.index}}" src="{{gt_image_mainsrc(singleSeparatorImage)}}">
							{% elseif separatorAsImage != null %}
								<img class="{{blockClassName}}__separator {{blockClassName}}__separator--image" src="{{gt_image_mainsrc(separatorImage)}}">
							{% else %}
								<span class="{{blockClassName}}__separator"></span>
							{% endif %}
							{% set elementType = item.text_link ? 'a href="' ~ item.text_link.url ~ '"' : 'span' %}
							<{{elementType}} class="{{blockClassName}}__text {{textShadowClassName}}">{{item.scrolling_banner_text}}</{{elementType}}>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	{% endif %}
	{% if fields.animations.enable_animations %}
		{{ include('components/animations-style-v3.twig', { fields, block, blockClassName }, with_context = false) }}
	{% endif %}

</section>
