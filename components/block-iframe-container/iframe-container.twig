{# Do not edit this file outside of the component library as your changes will be lost with future updates. #}
{% set blockClassName = "iframe-container" %}
{% set classNameEntryPoint = include('entry-points/entry-point-classes.twig', { fields, block }, with_context = false) %}
{% set htmlEntryPoint = include('entry-points/entry-point-html.twig', { fields, block, blockClassName, options, environment, is_preview, nav_menus }, with_context = false) %}
{% set dataAttributeEntryPoint = include('entry-points/entry-point-data-attribute.twig', { fields, block }, with_context = false) %}
{% set styleEntryPoint = include('entry-points/entry-point-style.twig', { fields, block, displaytype, is_preview }, with_context = false) %}
{% set previewEntryPoint = include('entry-points/entry-point-preview-info.twig', { fields, block, displaytype, is_preview }, with_context = false) %}
{% set autosizing = fields.enable_auto_sizing %}

{% if not autosizing %}
	{% set iframeHeight = '--iframe-height:' ~ fields.iframe_height ~ ';' %}
	{% set iframeHeightTablet = '--iframe-height-tablet:' ~ fields.iframe_height_tablet ~ ';' %}
	{% set iframeHeightMobile = '--iframe-height-mobile:' ~ fields.iframe_height_mobile ~ ';' %}
{% endif %}
{% set backgroundColour = '--background-colour:' ~ fields.background_colour ~ ';' %}

{% set sectionStyles =  styleEntryPoint ~ iframeHeight ~ iframeHeightTablet ~ iframeHeightMobile ~ backgroundColour %}
{% set allowValues = fields.allow_options %}

<section {{block.anchor ? "id=" ~ block.anchor : ''}} class="iframe-container {{blockClassName}} {{block.className}} {{classNameEntryPoint}} lazy-fade {{block.id}}" {{dataAttributeEntryPoint}} style="{{sectionStyles}}" data-src="{{fields.iframe_url}}" data-queryparameter="{{fields.query_parameter}}" {{autosizing ? 'data-autosizing=1' : ''}} data-queryprefix="{{fields.query_prefix|default('')}}" data-assetkey="iframe-container">
	<iframe class="{{blockClassName}}__iframe" src="" {% if allowValues %} allow="{{allowValues|join(' ; ')|replace({'__':''}) }}" {% endif %} frameborder="0"></iframe>
	{{htmlEntryPoint}}
</section>
