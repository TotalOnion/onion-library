{# Do not edit this file outside of the component library as your changes will be lost with future updates. #}
{% set blockClassName = 'card-carousel-v2' %}
{% set featureEnabled = environment != 'prod' %}
{% if featureEnabled %}

	{% set classNameEntryPoint = include('entry-points/entry-point-classes.twig', { fields, block }, with_context = false) %}
	{% set htmlEntryPoint = include('entry-points/entry-point-html.twig', { fields, block, blockClassName, options, environment, is_preview, nav_menus }, with_context = false) %}
	{% set dataAttributeEntryPoint = include('entry-points/entry-point-data-attribute.twig', { fields, block }, with_context = false) %}
	{% set styleEntryPoint = include('entry-points/entry-point-style.twig', { fields, block, displaytype, is_preview }, with_context = false) %}
	{% set previewEntryPoint = include('entry-points/entry-point-preview-info.twig', { fields, block, displaytype, is_preview }, with_context = false) %}


	{% set title = fields.carousel_title %}
	{% set introSlideTitle = fields.intro_slide_title %}
	{% set bottomText = fields.intro_slide_bottom_text %}
	{% set includeIntroSlide = fields.include_intro_slide %}
	{% set includeSubscribeSlide = fields.include_subscribe_slide %}
	{% set useDesktopSpacer = includeIntroSlide ? '' : 'use-desktop-spacer' %}
	{% set blockBgColour = '--block-background-colour:' ~ fields.block_background_colour ~ ';' %}
	{% set cardBgColour = '--card-background-colour:' ~ fields.card_background_colour ~ ';' %}
	{% set cardBorderRadius = '--card-border-radius:' ~ fields.card_border_radius ~ ';' %}
	{% set titleMarginBottomDesktop = '--carousel_title_margin_bottom_desktop:' ~ fields.carousel_title_margin_bottom_desktop ~ ';' %}
	{% set titleMarginBottomMobile = '--carousel_title_margin_bottom_mobile:' ~ fields.carousel_title_margin_bottom_mobile ~ ';' %}
	{% set arrowsColor = '--arrows-color:' ~ fields.arrows_color ~ ';' %}
	{% set arrowSizeMobile = '--arrow-size-mobile:' ~ fields.arrows_size_mobile ~ ';' %}
	{% set arrowSizePortrait = '--arrow-size-portrait:' ~ fields.arrows_size_portrait ~ ';' %}
	{% set arrowSizeDesktop = '--arrow-size-desktop:' ~ fields.arrows_size_desktop ~ ';' %}
	{% set subscribeButtonType = fields.subscribe_button_type|ru %}

	{% if fields.text_editor_settings_fields.desktop_default_text_colour %}
		{% set defaultTextColourDesktop = '--default-text-colour-desktop: ' ~ fields.text_editor_settings_fields.desktop_default_text_colour|ru ~ ';' %}
	{% endif %}
	{% if fields.text_editor_settings_fields.mobile_default_text_colour %}
		{% set defaultTextColourMobile = '--default-text-colour-mobile: ' ~ fields.text_editor_settings_fields.mobile_default_text_colour|ru ~ ';' %}
	{% endif %}

	{% if fields.text_editor_settings_fields.mobile_default_text_align %}
		{% set defaultTextAlignMobile = '--default-text-align-mobile: ' ~  fields.text_editor_settings_fields.mobile_default_text_align|ru ~ ';' %}
	{% endif %}
	{% if fields.text_editor_settings_fields.desktop_default_text_align %}
		{% set defaultTextAlignDesktop = '--default-text-align-desktop: ' ~  fields.text_editor_settings_fields.desktop_default_text_align|ru ~ ';' %}
	{% endif %}

	{% if fields.text_editor_settings_fields.mobile_default_text_transform %}
		{% set defaultTextTransformMobile = '--default-text-transform-mobile: ' ~  fields.text_editor_settings_fields.mobile_default_text_transform|ru ~ ';' %}
	{% endif %}
	{% if fields.text_editor_settings_fields.desktop_default_text_transform %}
		{% set defaultTextTransformDesktop = '--default-text-transform-desktop: ' ~  fields.text_editor_settings_fields.desktop_default_text_transform|ru ~ ';' %}
	{% endif %}

	{% if fields.text_editor_settings_fields.mobile_default_font_weight %}
		{% set defaultFontWeightMobile = '--default-font-weight-mobile: ' ~  fields.text_editor_settings_fields.mobile_default_font_weight|ru ~ ';' %}
	{% endif %}
	{% if fields.text_editor_settings_fields.desktop_default_font_weight %}
		{% set defaultFontWeightDesktop = '--default-font-weight-desktop: ' ~  fields.text_editor_settings_fields.desktop_default_font_weight|ru ~ ';' %}
	{% endif %}

	{% if fields.text_editor_settings_fields.enable_text_outline %}
		{% set textStrokeWidth = '--text-stroke-width: ' ~ fields.text_editor_settings_fields.text_outline_width ~ ';' %}
		{% set textStrokeColour = '--text-stroke-colour: ' ~ fields.text_editor_settings_fields.text_outline_colour ~ ';' %}
	{% endif %}

	{% if fields.text_editor_settings_fields.enable_text_shadow %}
		{% set textShadowClass = blockClassName|default('default-class') ~ "__text-shadow" %}
		{% set textShadowStyle = "--text-shadow-offset-x:" ~ (fields.text_editor_settings_fields.text_shadow_horizontal_offset|default(0)) ~ "; --text-shadow-offset-y: " ~ (fields.text_editor_settings_fields.text_shadow_vertical_offset|default(0)) ~ "; --text-shadow-blur: " ~ (fields.text_editor_settings_fields.text_shadow_blur|default(0)) ~ "; --text-shadow-colour: " ~ (fields.text_editor_settings_fields.text_shadow_colour|default("#000000")) ~ ";" %}
	{% endif %}

	{% if fields.text_editor_settings_fields.enable_wysiwyg_decoration %}
		{% set wysiwygDecorationStyle = fields.text_editor_settings_fields.wysiwyg_decoration_style|ru %}
	{% endif %}

	{% set sectionStyles = styleEntryPoint ~ blockBgColour ~ cardBgColour ~ cardBorderRadius ~ titleMarginBottomDesktop ~ titleMarginBottomMobile ~ arrowsColor ~ arrowSizeMobile ~ arrowSizePortrait ~ arrowSizeDesktop ~ defaultTextColourMobile ~ defaultTextColourDesktop ~ defaultTextAlignMobile ~ defaultTextAlignDesktop ~ defaultTextTransformMobile ~ defaultTextTransformDesktop ~ defaultFontWeightMobile ~ defaultFontWeightDesktop ~ textStrokeWidth ~ textStrokeColour ~ textShadowStyle %}


	<section {{block.anchor ? "id=" ~ block.anchor : ''}} class="{{blockClassName}} {{block.className}} lazy" data-assetkey="{{blockClassName}}" style="{{ sectionStyles }}">

		<{{fields.text_editor_settings_fields.element_type|ru}} class="{{blockClassName}}__title {{ fields.text_editor_settings_fields.typographic_style | ru }} {{textShadowClass}} {{blockClassName|default('default-class')}}__{{wysiwygDecorationStyle}}">{{fields.carousel_title|striptags('<a><strong><span>')}}</{{fields.text_editor_settings_fields.element_type|ru}}>
		<div class="{{blockClassName}}__arrow {{blockClassName}}__arrow--prev hidden">
			<svg viewbox='0 0 8 14' fill='none' xmlns='http://www.w3.org/2000/svg'>
				<path d='M7 1L1 7L7 13' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'></svg>
			</div>
			<div class="{{blockClassName}}__container">

				<div class="{{blockClassName}}__slide {{blockClassName}}__slide--spacer {{useDesktopSpacer}}"></div>

				{% if includeIntroSlide %}
					<div class="{{blockClassName}}__slide {{blockClassName}}__slide--intro">
						<div class="{{blockClassName}}__content-container">
							<p class="{{blockClassName}}__slide--intro__title">{{introSlideTitle}}</p>
							{% if fields.enable_cta and fields.cta_link is not empty %}
								<a class="{{ blockClassName }}__cta cmpl-cta-style-{{fields.cta_style|ru}}" target="{{fields.cta_link.target}}" href="{{fields.cta_link.url}}">{{fields.cta_link.title}}</a>
							{% endif %}

						</div>
					</div>
				{% endif %}

				{% for field in fields.cards %}
					{% set image = get_image(field.image) %}
					{% set text = field.text %}
					{% set sizes = '325px' %}

					<a draggable="false" class="{{blockClassName}}__wrapper" href="{{field.cta_link.url}}">
						<div class="{{blockClassName}}__slide">
							<img draggable="false" class="{{blockClassName}}__image" loading="lazy" src="{{image.src}}" srcset="{{image.srcset}}" width="{{image.width}}" height="{{image.height}}" alt="{{image.alt}}" sizes="{{sizes}}">
							<div class="{{blockClassName}}__content-container">
								<div class="{{blockClassName}}__text">{{text}}</div>
								{% if field.enable_cta and field.cta_link.title is not empty %}
									<div class="{{blockClassName}}__link">
										<a class="{{ blockClassName }}__cta cmpl-cta-style-{{field.cta_style|ru}}" target="{{field.cta_link.target}}" href="{{field.cta_link.url}}">{{field.cta_link.title}}</a>
									</div>
								{% endif %}
							</div>
						</a>
					</div>
				{% endfor %}

				{% if includeSubscribeSlide %}
					<div class="{{blockClassName}}__slide {{blockClassName}}__slide--subscribe-card modal__trigger" data-modal-name="subscribe">
						<div class="{{blockClassName}}__content-container">
							{% if fields.subscribe_slide_heading is not empty %}
								<h3 class="{{blockClassName}}__slide--subscribe-card__heading">{{fields.subscribe_slide_heading}}</h3>
							{% endif %}
							{% if subscribeButtonType == 'link'%}
								{% if fields.subscribe_cta_link is not empty %}
									<a class="{{ blockClassName }}__cta cmpl-cta-style-{{fields.subscribe_cta_style|ru}}" target="{{fields.subscribe_cta_link.target}}" href="{{fields.subscribe_cta_link.url}}">{{fields.subscribe_cta_link.title}}</a>
								{% endif %}
							{% endif %}
						</div>
					</div>
				{% endif %}
				<div class="{{blockClassName}}__slide {{blockClassName}}__slide--spacer safari"></div>
				<!-- Safari hack -->
			</div>
			{% if includeIntroSlide %}
				<div class="{{blockClassName}}__mobile-subscribe">
					<button class="{{blockClassName}}__mobile-text subscribe-trigger modal__trigger" data-modal-name="subscribe">{{bottomText}}</button>
				</div>
			{% endif %}
			<div class="{{blockClassName}}__arrow {{blockClassName}}__arrow--next ">
				<svg viewbox='0 0 8 14' fill='none' xmlns='http://www.w3.org/2000/svg'>
					<path d='M1 13L7 7L1 1' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'></svg>
				</div>
			</section>
		{% endif %}
